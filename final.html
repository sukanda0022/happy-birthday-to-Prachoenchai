<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IG Clone ‚Äì My Love Stories</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #storyVideos::-webkit-scrollbar {
            display: none;
        }

        #storyVideos {
            position: relative;
            height: 90vh; /* ‡∏™‡∏π‡∏á 90% ‡∏Ç‡∏≠‡∏á viewport height */
            max-width: 90vw; /* ‡∏Å‡∏ß‡πâ‡∏≤‡∏á 90% ‡∏Ç‡∏≠‡∏á viewport width */
            margin: 0 auto;
        }

        #storyVideos video {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            max-height: 100%;
            max-width: 100%;
            width: 100%;
            height: 100%; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.5);
            object-fit: contain;
            display: none;
        }

        .custom-max-w {
            max-width: 40rem;
        }

        .px-4 {
            padding-left: 7rem !important;
            padding-right: 7rem !important;
        }

        .custom-progress-container {
            padding-left: 7rem;
            padding-right: 7rem;
            max-width: 14rem;
        }
    </style>
</head>

<body class="bg-white text-gray-900">
    <header class="flex justify-between items-center px-4 py-2 border-b shadow-sm sticky top-0 bg-white z-50">
        <h1 class="text-xl font-bold">Instagram</h1>
        <span class="text-pink-500 font-semibold">my_love</span>
    </header>

    <section class="flex flex-col items-center mt-6">
        <div onclick="showStoryPopup()"
            class="w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-pink-500 to-yellow-400 cursor-pointer hover:scale-105 transition-transform duration-300">
            <div class="w-full h-full rounded-full bg-white p-1 overflow-hidden">
                <img src="img/22.jpg" class="w-full h-full rounded-full object-cover" alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ü‡∏ô">
            </div>
        </div>

        <h2 class="mt-2 font-semibold text-lg">@Happy birthday Prachoenchai üíñ</h2>
        <div class="flex gap-6 text-sm mt-3">
            <div class="text-center">
                <p class="font-bold">6</p>
                <p class="text-gray-500">‡πÇ‡∏û‡∏™‡∏ï‡πå</p>
            </div>
            <div class="text-center">
                <p class="font-bold">999M</p>
                <p class="text-gray-500">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</p>
            </div>
            <div class="text-center">
                <p class="font-bold">1</p>
                <p class="text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</p>
            </div>
        </div>
        <p class="mt-4 text-center text-sm text-gray-600 px-6">23-08-2001 <br> -------------</p>
    </section>

    <!-- Gallery Section -->
    <section class="px-1 mt-6 space-y-1">
        <!-- Row 1 -->
        <div class="grid grid-cols-3 gap-1">
            <div class="relative group cursor-pointer"
                onclick="openModal('img/1.jpg', '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÉ‡∏à <br>  üíñ')">
                <img src="img/1.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 1">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
            <div class="relative group cursor-pointer"
                onclick="openModal('img/5.jpg', '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô <br>  üíñ')">
                <img src="img/5.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 2">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
            <div class="relative group cursor-pointer"
                onclick="openModal('img/9.jpg', '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ <br> üí´ ')">
                <img src="img/9.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 3">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
        </div>

        <!-- Row 2 -->
        <div class="w-full flex justify-center bg-black">
            <div class="relative group w-full max-w-2xl">
                <video class="w-full h-auto rounded-md" autoplay loop playsinline>
                    <source src="img/jay.mp4" type="video/mp4" />
                    ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
                </video>
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm rounded-md">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
        </div>

        <!-- Row 3 -->
        <div class="grid grid-cols-3 gap-1">
            <div class="relative group cursor-pointer"
                onclick="openModal('img/12.jpg', '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏¢‡πà‡∏≤‡∏á‡∏Å‡πâ‡∏≤‡∏ß <br> üíï')">
                <img src="img/12.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 4">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
            <div class="relative group cursor-pointer"
                onclick="openModal('img/23.jpg', '‡πÉ‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏ò‡∏≠‡∏Å‡πá‡∏ä‡πà‡∏≤‡∏á ‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏ô‡∏ô‡∏∞ <br> üíê')">
                <img src="img/23.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 5">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
            <div class="relative group cursor-pointer"
                onclick="openModal('../img/8.jpg', '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ <br> ü§ç')">
                <img src="img/8.jpg" class="w-full aspect-square object-cover" alt="‡∏†‡∏≤‡∏û 6">
                <div
                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-sm">
                    ‚ù§Ô∏è 99 &nbsp; üí¨ 12
                </div>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-md w-full p-4 relative flex flex-col items-center">
            <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-500">‚úñÔ∏è</button>
            <img id="modalImage" src="" alt="‡πÉ‡∏´‡∏ç‡πà" class="w-full rounded mb-3 max-w-full max-h-[60vh] object-contain">
            <p id="modalCaption" class="text-center text-sm text-gray-700 mx-auto max-w-xs whitespace-pre-line"></p>
        </div>
    </div>
    <nav
        class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-inner flex justify-around py-2 text-gray-500 text-xl">
        <button>üè†</button>
        <button>üîç</button>
        <button>‚ûï</button>
        <button>üë§</button>
    </nav>

    <!-- Story Popup ‡πÅ‡∏ö‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡∏•‡∏∞‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÉ‡∏ä‡πâ display ‡πÅ‡∏ó‡∏ô translateX -->
    <div id="storyPopup" class="fixed inset-0 bg-black bg-opacity-95 z-50 hidden flex flex-col">
        <!-- Header -->
        <div class="flex justify-between items-center text-white px-4 pt-4 pb-2 max-w-md w-full mx-auto">
            <div class="flex items-center space-x-3">
                <img src="img/22.jpg" alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ü‡∏ô"
                    class="w-10 h-10 rounded-full object-cover border-2 border-pink-500" />
                <span class="font-semibold">@my_love</span>
            </div>
            <button onclick="hideStoryPopup()"
                class="text-3xl font-bold hover:text-pink-500 transition-colors focus:outline-none">√ó</button>
        </div>

        <!-- Progress Bars -->
        <div id="progressContainer"
            class="flex gap-[3px] h-[4px] w-full mb-4 mx-auto custom-progress-container max-w-[40rem]">

            <!-- progress bars created dynamically -->
        </div>

        <!-- Videos Container -->
        <div id="storyVideos" class="w-full mx-auto relative" style="height: 90vh; max-width: 90vw;">
            <!-- Video elements inserted dynamically -->
        </div>
    </div>
    <script>
        function openModal(imageSrc, captionHtml) {
            document.getElementById('modalImage').src = imageSrc;
            document.getElementById('modalCaption').innerHTML = captionHtml; // ‡πÉ‡∏ä‡πâ innerHTML ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á <br> 
            const modal = document.getElementById('imageModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
    </script>
    <script>
        const storyPopup = document.getElementById('storyPopup');
        const storyVideosContainer = document.getElementById('storyVideos');
        const progressContainer = document.getElementById('progressContainer');

        // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà (‡πÅ‡∏Å‡πâ path ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
        const stories = [
            { src: '../img/story1.mp4' },
            { src: '../img/story2.mp4' },
            { src: '../img/story3.mp4' }
        ];

        let currentStoryIndex = 0;
        let animationFrameId = null;
        let startTime = null;
        let duration = 5; // fallback

        function createProgressBars() {
            progressContainer.innerHTML = '';
            for (let i = 0; i < stories.length; i++) {
                const bar = document.createElement('div');
                bar.className = 'flex-1 bg-white/30 rounded-full h-full overflow-hidden';
                const fill = document.createElement('div');
                fill.className = 'bg-white h-full w-0 transition-all duration-300 ease-linear';
                bar.appendChild(fill);
                progressContainer.appendChild(bar);
            }
        }

        function createVideos() {
            storyVideosContainer.innerHTML = '';
            stories.forEach((story, index) => {
                const video = document.createElement('video');
                video.src = story.src;
                video.className =
                    'w-full h-full rounded-lg shadow-lg object-contain absolute top-0 left-0 right-0 bottom-0 mx-auto my-auto';
                video.setAttribute('playsinline', '');
                video.preload = 'auto';
                video.style.display = 'none'; // ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á
                storyVideosContainer.appendChild(video);
            });
        }

        function showStoryPopup() {
            storyPopup.classList.remove('hidden');
            currentStoryIndex = 0;
            updateStories();
            playCurrentStory(true); // unmute ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        }

        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô hideStoryPopup ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á
        function hideStoryPopup() {
            storyPopup.classList.add('hidden');

            // ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß
            const videos = storyVideosContainer.querySelectorAll('video');
            videos.forEach(video => {
                video.pause();
                video.currentTime = 0;
                video.style.display = 'none';
                video.muted = true;
                // ‡∏Å‡∏£‡∏ì‡∏µ browser ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏´‡∏•‡∏î‡∏î‡πâ‡∏ß‡∏¢
                try {
                    video.src = '';
                    video.load();
                } catch { }
            });

            resetProgressBars();
            cancelAnimationFrame(animationFrameId);
            startTime = null;
        }

        function pauseAllVideos() {
            const videos = storyVideosContainer.querySelectorAll('video');
            videos.forEach((v) => {
                v.pause();
                v.style.display = 'none';
                v.muted = true;
            });
        }

        function playCurrentStory(unmute = false) {
            pauseAllVideos();
            const videos = storyVideosContainer.querySelectorAll('video');
            const video = videos[currentStoryIndex];
            if (!video) return;

            video.style.display = 'block';
            video.currentTime = 0;
            video.muted = !unmute;
            video.play();

            duration = video.duration || 5;
            startTime = null;
            animateProgressBar();

            video.onloadedmetadata = () => {
                duration = video.duration;
            };

            video.onended = () => {
                nextStory();
            };
        }

        function animateProgressBar(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            const progress = Math.min(elapsed / (duration * 1000), 1);
            updateProgressBar(progress);
            if (progress < 1) {
                animationFrameId = requestAnimationFrame(animateProgressBar);
            }
        }

        function updateProgressBar(progress) {
            const bars = progressContainer.children;
            for (let i = 0; i < bars.length; i++) {
                const fill = bars[i].firstChild;
                if (i < currentStoryIndex) {
                    fill.style.width = '100%';
                } else if (i === currentStoryIndex) {
                    fill.style.width = (progress * 100) + '%';
                } else {
                    fill.style.width = '0%';
                }
            }
        }

        function resetProgressBars() {
            const bars = progressContainer.children;
            for (let i = 0; i < bars.length; i++) {
                bars[i].firstChild.style.width = '0%';
            }
        }

        function nextStory() {
            if (currentStoryIndex < stories.length - 1) {
                currentStoryIndex++;
                playCurrentStory(true);
            } else {
                hideStoryPopup();
            }
        }

        function prevStory() {
            if (currentStoryIndex > 0) {
                currentStoryIndex--;
                playCurrentStory(true);
            }
        }

        function updateStories() {
            createProgressBars();
            createVideos();
        }

        // ‡∏Å‡∏î‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤‡πÉ‡∏ô popup ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤/‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        storyPopup.addEventListener('click', (e) => {
            const x = e.clientX;
            const width = window.innerWidth;
            if (x < width / 2) {
                prevStory();
            } else {
                nextStory();
            }
        });

        // ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        updateStories();
    </script>
    <script>
        const galleryVideo = document.querySelector('section video'); // ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2

        function muteGalleryVideo() {
            if (galleryVideo) {
                galleryVideo.muted = true;
            }
        }

        function unmuteGalleryVideo() {
            if (galleryVideo) {
                galleryVideo.muted = false;
            }
        }

        // ‡πÅ‡∏ó‡∏£‡∏Å‡πÉ‡∏ô showStoryPopup ‡πÄ‡∏û‡∏∑‡πà‡∏≠ mute ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ñ‡∏ß 2
        const originalShowStoryPopup = showStoryPopup;
        showStoryPopup = function () {
            muteGalleryVideo();
            originalShowStoryPopup();
        }

        // ‡πÅ‡∏ó‡∏£‡∏Å‡πÉ‡∏ô hideStoryPopup ‡πÄ‡∏û‡∏∑‡πà‡∏≠ unmute ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ñ‡∏ß 2
        const originalHideStoryPopup = hideStoryPopup;
        hideStoryPopup = function () {
            unmuteGalleryVideo();
            originalHideStoryPopup();
        }
    </script>

</body>

</html>

